# 🚀 Netlify 部署指南

## 方法一：通过 Netlify Dashboard（推荐，最简单）

### 步骤 1: 准备代码仓库

1. **初始化 Git（如果还没有）**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   ```

2. **推送到 GitHub**
   - 在 GitHub 上创建一个新仓库
   - 将代码推送到 GitHub：
   ```bash
   git remote add origin https://github.com/你的用户名/你的仓库名.git
   git branch -M main
   git push -u origin main
   ```

### 步骤 2: 在 Netlify 上部署

1. **登录 Netlify**
   - 访问 https://app.netlify.com
   - 使用 GitHub 账号登录（如果没有账号，先注册）

2. **创建新站点**
   - 点击 "Add new site" → "Import an existing project"
   - 选择 "GitHub" 作为 Git 提供商
   - 授权 Netlify 访问你的 GitHub 仓库
   - 选择你的博客仓库

3. **配置构建设置**
   - **Build command**: `npm run build`
   - **Publish directory**: `dist`
   - 这些设置已经在 `netlify.toml` 中配置好了，Netlify 会自动读取

4. **添加环境变量**（重要！）
   - 点击 "Show advanced" → "New variable"
   - 添加第一个环境变量：
     - **Key**: `VITE_SUPABASE_URL`
     - **Value**: `https://sghguktqickuilrttjmr.supabase.co`
   - 添加第二个环境变量：
     - **Key**: `VITE_SUPABASE_ANON_KEY`
     - **Value**: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNnaGd1a3RxaWNrdWlscnR0am1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwODg4NjYsImV4cCI6MjA3ODY2NDg2Nn0.1pTp1giUuX5IGlApNf_wiEHb99kyFtroO3h5nvyIMhA`

5. **部署**
   - 点击 "Deploy site"
   - 等待构建完成（通常需要 1-2 分钟）

6. **完成！**
   - 部署完成后，你会得到一个类似 `https://your-site-name.netlify.app` 的网址
   - 点击这个网址就可以访问你的博客了！

---

## 方法二：通过 Netlify CLI（命令行）

### 步骤 1: 安装 Netlify CLI

```bash
npm install -g netlify-cli
```

### 步骤 2: 登录 Netlify

```bash
netlify login
```

这会打开浏览器，让你登录 Netlify 账号。

### 步骤 3: 初始化项目

```bash
netlify init
```

按照提示操作：
- 选择 "Create & configure a new site"
- 输入站点名称（或使用默认）
- 选择团队（如果有）

### 步骤 4: 设置环境变量

```bash
netlify env:set VITE_SUPABASE_URL "https://sghguktqickuilrttjmr.supabase.co"
netlify env:set VITE_SUPABASE_ANON_KEY "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNnaGd1a3RxaWNrdWlscnR0am1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwODg4NjYsImV4cCI6MjA3ODY2NDg2Nn0.1pTp1giUuX5IGlApNf_wiEHb99kyFtroO3h5nvyIMhA"
```

### 步骤 5: 部署

```bash
netlify deploy --prod
```

---

## 方法三：拖拽部署（最简单，但不推荐用于生产）

1. 运行 `npm run build` 构建项目
2. 将 `dist` 文件夹拖拽到 https://app.netlify.com/drop
3. 在 Netlify Dashboard 中添加环境变量
4. 重新部署

**注意**: 这种方法每次更新都需要手动拖拽，不方便。

---

## ✅ 部署后检查清单

- [ ] 网站可以正常访问
- [ ] 首页能正常显示
- [ ] 可以创建文章
- [ ] 可以查看文章详情
- [ ] 可以添加评论
- [ ] 所有功能都正常工作

---

## 🔧 常见问题

### 问题 1: 页面显示空白
**解决方案**: 检查环境变量是否正确设置，确保 `VITE_SUPABASE_URL` 和 `VITE_SUPABASE_ANON_KEY` 都已添加。

### 问题 2: 构建失败
**解决方案**: 
- 检查 `package.json` 中的依赖是否正确
- 查看 Netlify 构建日志中的错误信息
- 确保 Node.js 版本兼容（Netlify 默认使用 Node 18）

### 问题 3: 路由404错误
**解决方案**: `netlify.toml` 中已经配置了重定向规则，应该不会有这个问题。如果还有，检查 `netlify.toml` 文件是否正确。

---

## 📝 提交作业

部署完成后，你需要提交：
1. **Netlify 部署地址**（例如：`https://your-site.netlify.app`）
2. **Supabase 数据库表截图**（在 Supabase Dashboard 中截图）

---

## 🎉 完成！

部署完成后，你的博客就可以在互联网上访问了！🎊

